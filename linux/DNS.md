域名解析是把域名指向网站空间 IP，让人们通过注册的域名，可以方便地访问到网站的一种服务。域名解析也叫域名指向、服务器设置、域名配置以及反向 IP 登记等等。说的简单点，就是将好记的域名解析成 IP，服务由 DNS 服务器完成，是把域名解析到一个 IP 地址，然后在此 IP 地址的主机上将一个子目录与域名绑定。

DNS 可以提供域名和 IP 地址的映射关系，也是一种常用的全局负载均衡（GSLB）实现方法

# 顺序

根域名服务器(.)-->顶级域名(com.)–>二级域名(baidu.com.)–>A记录(www.baidu.com.)

## 域名解析 A 记录中各种符号（@、*、www等）表示的意思

`@` 这个应该代表不带 `www` 的域名，如 daimafans.com

`*` 这个是泛解析（包含除 daimafans.com 外的所有二级域名）

`www` 表示 www.daimafans.com 的解析

A (A--ress) 记录是用来指定主机名（或域名）对应的 IP 地址记录的。

> 说明：用户可以将该域名下的网站服务器指向到自己的网络服务器上。同时也可以设置自己的二级域名。

## A 记录解析

域名解析记录类型选择 “A”，线路类型选择通用或者同时添加三条线路类型为电信、网通、教育网的记录，记录值填写空间商提供的主机 IP 地址， MX 优先级不需要设置， TTL 设置默认即可。

## CNAME 记录解析

CNAME 类型解析设置的方法和 A 记录类型基本是一样的，其中将记录类型修改为 “CNAME”，并且记录值填写服务器主机地址即可。

## 泛域名解析

泛域名解析是指将 `*.域名` 解析到同一IP。在域名前添加任何子域名，均可访问到所指向的 WEB 地址。也就是客户的域名 daimafans.com 之下所设的 `*.daimafans.com` 全部解析到同一个 IP 地址上去。比如客户设 `**.daimafans.com` 就会自己自动解析到与 daimafans.com 同一个 IP 上去。

# DNS缓存用以加速解析

我们使用的主流 Linux 发行版，除了最新版本的 Ubuntu （如 18.04 或者更新版本）外，其他版本并没有自动配置 DNS 缓存。所以，想要为系统开启 DNS 缓存，就需要你做额外的配置。比如，最简单的方法，就是使用 dnsmasq。
dnsmasq 是最常用的 DNS 缓存服务之一，还经常作为 DHCP 服务来使用。它的安装和配置都比较简单，性能也可以满足绝大多数应用程序对 DNS 缓存的需求。

修改 /etc/resolv.conf，将 DNS 服务器改为 dnsmasq 的监听地址，这儿是 127.0.0.1。接着，重新执行多次 nslookup 命令：

# DNS优化

- 对 DNS 解析的结果进行缓存。缓存是最有效的方法，但要注意，一旦缓存过期，还是要去 DNS 服务器重新获取新记录。不过，这对大部分应用程序来说都是可接受的。
- 对 DNS 解析的结果进行预取。这是浏览器等 Web 应用中最常用的方法，也就是说，不等用户点击页面上的超链接，浏览器就会在后台自动解析域名，并把结果缓存起来。
- 使用 HTTPDNS 取代常规的 DNS 解析。这是很多移动应用会选择的方法，特别是如今域名劫持普遍存在，使用 HTTP 协议绕过链路中的 DNS 服务器，就可以避免域名劫持的问题。
- 基于 DNS 的全局负载均衡（GSLB）。这不仅为服务提供了负载均衡和高可用的功能，还可以根据用户的位置，返回距离最近的 IP 地址。